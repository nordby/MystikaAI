// bot/src/utils/messages.js

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
 */
function formatWelcomeMessage(user, isNewUser = false) {
    const greeting = isNewUser ? '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å' : '–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º';
    
    return `üîÆ <b>${greeting}, ${user.firstName}!</b>\n\n` +
           '‚ú® <b>MISTIKA</b> ‚Äî —ç—Ç–æ –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫.\n\n' +
           'üé¥ <b>–ß—Ç–æ —è —É–º–µ—é:</b>\n' +
           '‚Ä¢ üåÖ –î–Ω–µ–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã –¢–∞—Ä–æ\n' +
           '‚Ä¢ üéØ –†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã\n' +
           '‚Ä¢ üî¢ –ù—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã\n' +
           '‚Ä¢ üåô –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å\n' +
           '‚Ä¢ üì∏ –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–ü—Ä–µ–º–∏—É–º)\n' +
           '‚Ä¢ üé§ –ì–æ–ª–æ—Å–æ–≤—ã–µ –≥–∞–¥–∞–Ω–∏—è (–ü—Ä–µ–º–∏—É–º)\n\n' +
           'üéÅ <b>–ë–æ–Ω—É—Å –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:</b>\n' +
           '‚Ä¢ 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–∞–¥–∞–Ω–∏—è\n' +
           '‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–æ–≤—ã–º —Ä–∞—Å–∫–ª–∞–¥–∞–º\n' +
           '‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞\n\n' +
           'üëá <i>–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å:</i>';
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–∞—Ä—Ç–æ–π
 */
function formatCardMessage(card, isReversed, interpretation, date = null) {
    const reversedText = isReversed ? ' (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞—è)' : '';
    const dateText = date ? `\nüìÖ <i>${new Date(date).toLocaleDateString('ru-RU')}</i>` : '';
    
    return `üé¥ <b>${card.card_name}${reversedText}</b>\n\n` +
           `üÉè <i>${card.suit} - ${card.card_type}</i>\n\n` +
           `üí´ <b>–ó–Ω–∞—á–µ–Ω–∏–µ:</b>\n${interpretation}\n\n` +
           `üîÆ <b>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</b>\n${isReversed ? card.keywords_reversed : card.keywords_upright}${dateText}`;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ–π –∫–∞—Ä—Ç—ã
 */
function formatDailyCardMessage(cardData) {
    const { card, isReversed, interpretation, date } = cardData;
    
    return `üåÖ <b>–í–∞—à–∞ –∫–∞—Ä—Ç–∞ –¥–Ω—è</b>\n\n` +
           formatCardMessage(card, isReversed, interpretation, date) + '\n\n' +
           'üí° <i>–î–µ—Ä–∂–∏—Ç–µ —ç—Ç—É —ç–Ω–µ—Ä–≥–∏—é –≤ —Å–µ—Ä–¥—Ü–µ –≤–µ—Å—å –¥–µ–Ω—å!</i>';
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–º–∏—É–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
 */
function formatPremiumFeatures(subscription, plans) {
    const isPremium = subscription && subscription.status === 'active';
    
    let text = 'üíé <b>–ü–†–ï–ú–ò–£–ú –í–û–ó–ú–û–ñ–ù–û–°–¢–ò</b>\n\n';
    
    if (isPremium) {
        text += '‚úÖ <b>–£ –≤–∞—Å –∞–∫—Ç–∏–≤–Ω–∞ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞!</b>\n\n';
        text += `üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${new Date(subscription.expiresAt).toLocaleDateString('ru-RU')}\n\n`;
    }
    
    text += 'üåü <b>–ü—Ä–µ–º–∏—É–º –≤–∫–ª—é—á–∞–µ—Ç:</b>\n' +
            '‚Ä¢ üé¥ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≥–∞–¥–∞–Ω–∏—è\n' +
            '‚Ä¢ üéØ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã\n' +
            '‚Ä¢ ü§ñ AI –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π\n' +
            '‚Ä¢ üé§ –ì–æ–ª–æ—Å–æ–≤—ã–µ –≥–∞–¥–∞–Ω–∏—è\n' +
            '‚Ä¢ üé® –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã\n' +
            '‚Ä¢ üîÆ –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏\n' +
            '‚Ä¢ üìä –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n' +
            '‚Ä¢ ‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n' +
            '‚Ä¢ üéÅ –†–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤–∏–Ω–∫–∞–º\n\n';
    
    if (!isPremium && plans && plans.length > 0) {
        text += 'üí∞ <b>–¢–∞—Ä–∏—Ñ—ã:</b>\n';
        plans.forEach(plan => {
            text += `‚Ä¢ ${plan.name}: ${plan.price} ${plan.currency}/${plan.period}\n`;
        });
        text += '\n';
    }
    
    text += isPremium ? 
            'üéâ <i>–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏!</i>' :
            'üéØ <i>–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫!</i>';
    
    return text;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
 */
function formatSubscriptionStatus(subscription) {
    if (!subscription || subscription.status !== 'active') {
        return 'üìä <b>–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏</b>\n\n' +
               '‚ùå <b>–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞</b>\n\n' +
               '–û—Ñ–æ—Ä–º–∏—Ç–µ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º!';
    }
    
    const expiresAt = new Date(subscription.expiresAt);
    const now = new Date();
    const daysLeft = Math.ceil((expiresAt - now) / (1000 * 60 * 60 * 24));
    
    let statusText = 'üìä <b>–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏</b>\n\n' +
                     `‚úÖ <b>–ü—Ä–µ–º–∏—É–º –∞–∫—Ç–∏–≤–µ–Ω</b>\n` +
                     `üíé –ü–ª–∞–Ω: ${subscription.planName}\n` +
                     `üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${expiresAt.toLocaleDateString('ru-RU')}\n` +
                     `‚è∞ –û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: ${daysLeft}\n\n`;
    
    if (daysLeft <= 3) {
        statusText += '‚ö†Ô∏è <b>–ü–æ–¥–ø–∏—Å–∫–∞ —Å–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞–µ—Ç!</b>\n' +
                     '–ü—Ä–æ–¥–ª–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è–º.\n\n';
    }
    
    statusText += subscription.autoRenew ? 
                  'üîÑ <i>–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ</i>' :
                  '‚è∏Ô∏è <i>–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ</i>';
    
    return statusText;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
 */
function formatReferralProgram(referralData) {
    return 'üéÅ <b>–†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –ü–†–û–ì–†–ê–ú–ú–ê</b>\n\n' +
           'üë• <b>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã!</b>\n\n' +
           'üéØ <b>–ó–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞:</b>\n' +
           '‚Ä¢ üíé 3 –¥–Ω—è –ø—Ä–µ–º–∏—É–º–∞\n' +
           '‚Ä¢ üé¥ 10 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–∞–¥–∞–Ω–∏–π\n' +
           '‚Ä¢ üåü –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã\n\n' +
           'üéÅ <b>–í–∞—à –¥—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç:</b>\n' +
           '‚Ä¢ üéä –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å\n' +
           '‚Ä¢ üé¥ 5 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–∞–¥–∞–Ω–∏–π\n' +
           '‚Ä¢ üíé 1 –¥–µ–Ω—å –ø—Ä–µ–º–∏—É–º–∞\n\n' +
           `üìä <b>–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>\n` +
           `üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: ${referralData.totalReferrals || 0}\n` +
           `üéÅ –ë–æ–Ω—É—Å—ã –ø–æ–ª—É—á–µ–Ω—ã: ${referralData.totalRewards || 0}\n` +
           `üîó –í–∞—à –∫–æ–¥: <code>${referralData.referralCode}</code>\n\n` +
           'üì± <i>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –¥—Ä—É–∑—å—è–º–∏!</i>';
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
 */
function formatReferralStats(stats) {
    return `üìä <b>–°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–ï–§–ï–†–ê–õ–û–í</b>\n\n` +
           `üë• <b>–í—Å–µ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–æ:</b> ${stats.totalReferrals || 0}\n` +
           `‚úÖ <b>–ê–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:</b> ${stats.activeReferrals || 0}\n` +
           `üéÅ <b>–í—Å–µ–≥–æ –Ω–∞–≥—Ä–∞–¥:</b> ${stats.totalRewards || 0}\n` +
           `üíé <b>–ë–æ–Ω—É—Å–Ω—ã—Ö –¥–Ω–µ–π:</b> ${stats.bonusDays || 0}\n` +
           `üé¥ <b>–ë–æ–Ω—É—Å–Ω—ã—Ö –≥–∞–¥–∞–Ω–∏–π:</b> ${stats.bonusReadings || 0}\n\n` +
           `üîó <b>–í–∞—à –∫–æ–¥:</b> <code>${stats.referralCode}</code>\n\n` +
           `üìà <b>–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–∞–≥—Ä–∞–¥—ã:</b>\n` +
           `${stats.progressToNext || 0}/5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤`;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
 */
function formatNumerologyReading(numerologyData) {
    const { lifePathNumber, destinyNumber, personalityNumber, analysis } = numerologyData;
    
    return `üî¢ <b>–ù–£–ú–ï–†–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó</b>\n\n` +
           `üéØ <b>–ß–∏—Å–ª–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏:</b> ${lifePathNumber}\n` +
           `${analysis.lifePath}\n\n` +
           `‚≠ê <b>–ß–∏—Å–ª–æ —Å—É–¥—å–±—ã:</b> ${destinyNumber}\n` +
           `${analysis.destiny}\n\n` +
           `üé≠ <b>–ß–∏—Å–ª–æ –ª–∏—á–Ω–æ—Å—Ç–∏:</b> ${personalityNumber}\n` +
           `${analysis.personality}\n\n` +
           `üí´ <b>–û–±—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑:</b>\n${analysis.forecast}`;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—É–Ω–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
 */
function formatLunarCalendar(lunarData) {
    const { moonPhase, lunarDay, zodiacSign, recommendations } = lunarData;
    
    return `üåô <b>–õ–£–ù–ù–´–ô –ö–ê–õ–ï–ù–î–ê–†–¨</b>\n\n` +
           `${moonPhase.symbol} <b>${moonPhase.name}</b>\n` +
           `üìÖ –õ—É–Ω–Ω—ã–π –¥–µ–Ω—å: ${lunarDay}\n` +
           `‚ôê –õ—É–Ω–∞ –≤ ${zodiacSign.name}\n\n` +
           `üåü <b>–≠–Ω–µ—Ä–≥–∏—è –¥–Ω—è:</b>\n${moonPhase.energy}\n\n` +
           `‚úÖ <b>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:</b>\n` +
           recommendations.recommended.slice(0, 3).map(r => `‚Ä¢ ${r}`).join('\n') + '\n\n' +
           `‚ùå <b>–ò–∑–±–µ–≥–∞—Ç—å:</b>\n` +
           recommendations.avoid.slice(0, 3).map(a => `‚Ä¢ ${a}`).join('\n');
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
 */
function formatErrorMessage(error, context = '') {
    const errorMessages = {
        'RATE_LIMIT': '‚è∞ –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É.',
        'PREMIUM_REQUIRED': 'üíé –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.',
        'DAILY_LIMIT': 'üìÖ –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≤—Ç—Ä–∞.',
        'INVALID_DATA': '‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.',
        'SERVER_ERROR': 'üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–µ–ø–æ–ª–∞–¥–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',
        'NETWORK_ERROR': 'üåê –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.'
    };
    
    const message = errorMessages[error] || '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
    
    return context ? `${message}\n\n<i>${context}</i>` : message;
}

/**
 * –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
 */
function getMysticalLoadingMessage(type = 'general') {
    const messages = {
        tarot: [
            'üåô *–ü—Ä–∏–∑—ã–≤–∞—é –º—É–¥—Ä–æ—Å—Ç—å –¥—Ä–µ–≤–Ω–∏—Ö*\n\nüîÆ –ü—Ä–æ—à—É –¥—É—Ö–æ–≤ –∫–∞—Ä—Ç –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–∏–Ω—É...',
            '‚ú® *–ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ —ç–Ω–µ—Ä–≥–∏–∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π*\n\nüÉè –ö–∞—Ä—Ç—ã —à–µ–ø—á—É—Ç —Å–≤–æ–∏ —Å–µ–∫—Ä–µ—Ç—ã...',
            'üåü *–†–∞—Å–∫—Ä—ã–≤–∞—é –∑–∞–≤–µ—Å—É —Ç–∞–π–Ω*\n\nüîÆ –î—Ä–µ–≤–Ω–∏–µ –∑–Ω–∞–Ω–∏—è –ø—Ä–æ–±—É–∂–¥–∞—é—Ç—Å—è...',
            'üåô *–í—ã–∑—ã–≤–∞—é —Å–∏–ª—ã –¢–∞—Ä–æ*\n\n‚ú® –ö–∞—Ä—Ç—ã –≥–æ—Ç–æ–≤—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–≤–æ–∏ —Ç–∞–π–Ω—ã...',
            'üîÆ *–°–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞—é—Å—å –Ω–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö —ç–Ω–µ—Ä–≥–∏—è—Ö*\n\nüåü –í—Å–µ–ª–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–∏—Ç –æ—Ç–≤–µ—Ç...'
        ],
        numerology: [
            'üî¢ *–í—ã—á–∏—Å–ª—è—é —á–∏—Å–ª–æ–≤—ã–µ –≤–∏–±—Ä–∞—Ü–∏–∏*\n\n‚ú® –†–∞—Å–∫—Ä—ã–≤–∞—é —Ç–∞–π–Ω—ã —á–∏—Å–µ–ª...',
            'üåü *–ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –º–∞—Ç—Ä–∏—Ü–µ*\n\nüî¢ –ß–∏—Å–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç —Å–≤–æ–∏ —Å–µ–∫—Ä–µ—Ç—ã...',
            'üîÆ *–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–æ—Ç—ã*\n\nüåô –í—Å–µ–ª–µ–Ω–Ω–∞—è —à–µ–ø—á–µ—Ç —á–µ—Ä–µ–∑ —á–∏—Å–ª–∞...',
            '‚ú® *–î–µ–∫–æ–¥–∏—Ä—É—é –≤–∏–±—Ä–∞—Ü–∏–∏ —Å—É–¥—å–±—ã*\n\nüî¢ –î—Ä–µ–≤–Ω—è—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç—Å—è...'
        ],
        lunar: [
            'üåô *–ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ –ª—É–Ω–Ω—ã–º —Ü–∏–∫–ª–∞–º*\n\n‚ú® –õ—É–Ω–∞ –¥–µ–ª–∏—Ç—Å—è —Å–≤–æ–µ–π –º—É–¥—Ä–æ—Å—Ç—å—é...',
            'üåü *–ß–∏—Ç–∞—é –ª—É–Ω–Ω—ã–µ –ø–∏—Å—å–º–µ–Ω–∞*\n\nüåô –ù–µ–±–µ—Å–Ω—ã–µ —Ç–µ–ª–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —Ç–∞–π–Ω—ã...',
            'üîÆ *–°–æ–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å —Å –ª—É–Ω–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π*\n\n‚ú® –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Ä–∏—Ç–º—ã –æ–∂–∏–≤–∞—é—Ç...',
            'üåô *–í—ã–∑—ã–≤–∞—é —Å–∏–ª—ã –Ω–µ–±–µ—Å–Ω—ã—Ö —Å–≤–µ—Ç–∏–ª*\n\nüåü –õ—É–Ω–∞ –≥–æ—Ç–æ–≤–∏—Ç –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏—è...'
        ],
        premium: [
            'üíé *–ê–∫—Ç–∏–≤–∏—Ä—É—é –ø—Ä–µ–º–∏—É–º-—ç–Ω–µ—Ä–≥–∏–∏*\n\n‚ú® –û—Ç–∫—Ä—ã–≤–∞—é –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–π–Ω—ã–º –∑–Ω–∞–Ω–∏—è–º...',
            'üåü *–ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ —ç–ª–∏—Ç–Ω–æ–º—É –∫–∞–Ω–∞–ª—É*\n\nüíé –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å –ø—Ä–æ–±—É–∂–¥–∞–µ—Ç—Å—è...',
            'üîÆ *–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –ø—Ä–µ–º–∏—É–º-—á–∞—Å—Ç–æ—Ç—ã*\n\n‚ú® –í—ã—Å—à–∏–µ —Å–∏–ª—ã –≥–æ—Ç–æ–≤—è—Ç –æ—Ç–≤–µ—Ç...'
        ],
        general: [
            '‚ú® *–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Ç—É–∞–ª*\n\nüîÆ –°–æ–±–∏—Ä–∞—é —ç–Ω–µ—Ä–≥–∏–∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π...',
            'üåü *–û—Ç–∫—Ä—ã–≤–∞—é –ø–æ—Ä—Ç–∞–ª –∑–Ω–∞–Ω–∏–π*\n\n‚ú® –î—Ä–µ–≤–Ω–∏–µ —Å–∏–ª—ã –ø—Ä–æ–±—É–∂–¥–∞—é—Ç—Å—è...',
            'üîÆ *–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –Ω–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–æ—Ç—ã*\n\nüåô –í—Å–µ–ª–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–∏—Ç –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ...',
            '‚ú® *–ü—Ä–∏–∑—ã–≤–∞—é –¥—É—Ö–æ–≤-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤*\n\nüåü –ú—É–¥—Ä–æ—Å—Ç—å –≤–µ–∫–æ–≤ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è...'
        ]
    };

    const typeMessages = messages[type] || messages.general;
    return typeMessages[Math.floor(Math.random() * typeMessages.length)];
}

/**
 * –°–µ—Ä–∏—è –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
 */
function getMysticalLoadingSequence(type = 'general') {
    const sequences = {
        tarot: [
            'üåô *–ü—Ä–∏–∑—ã–≤–∞—é –º—É–¥—Ä–æ—Å—Ç—å –¥—Ä–µ–≤–Ω–∏—Ö*\n\nüîÆ –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é —Å–≤—è—â–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ...',
            '‚ú® *–ü–µ—Ä–µ–º–µ—à–∏–≤–∞—é –∫–æ–ª–æ–¥—É –¢–∞—Ä–æ*\n\nüÉè –ö–∞—Ä—Ç—ã –≤—ã–±–∏—Ä–∞—é—Ç —Å–≤–æ–π –ø—É—Ç—å...',
            'üåü *–†–∞—Å–∫–ª–∞–¥—ã–≤–∞—é –∫–∞—Ä—Ç—ã –Ω–∞ –∞–ª—Ç–∞—Ä–µ*\n\nüîÆ –î—É—Ö–∏ –∫–∞—Ä—Ç –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å—Ç–∏–Ω—É...'
        ],
        numerology: [
            'üî¢ *–í—ã—á–∏—Å–ª—è—é —á–∏—Å–ª–æ–≤—ã–µ –≤–∏–±—Ä–∞—Ü–∏–∏*\n\n‚ú® –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è...',
            'üåü *–î–µ–∫–æ–¥–∏—Ä—É—é –∏–º—è –≤ —á–∏—Å–ª–∞*\n\nüî¢ –†–∞—Å–∫—Ä—ã–≤–∞—é —á–∏—Å–ª–µ–Ω–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É...',
            'üîÆ *–°–æ–ø–æ—Å—Ç–∞–≤–ª—è—é –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–æ—Ç—ã*\n\n‚ú® –ó–∞–≤–µ—Ä—à–∞—é –Ω—É–º–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç...'
        ],
        lunar: [
            'üåô *–ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ –ª—É–Ω–Ω—ã–º —Ü–∏–∫–ª–∞–º*\n\n‚ú® –°—á–∏—Ç—ã–≤–∞—é —Ñ–∞–∑—É –õ—É–Ω—ã...',
            'üåü *–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ç–∏–ª*\n\nüåô –û–ø—Ä–µ–¥–µ–ª—è—é –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å...',
            'üîÆ *–§–æ—Ä–º–∏—Ä—É—é –ª—É–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏*\n\n‚ú® –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Ä–∏—Ç–º—ã –≥–æ—Ç–æ–≤—ã...'
        ]
    };

    return sequences[type] || sequences.tarot;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
 */
function formatHelpMessage() {
    return 'üìö <b>–°–ü–†–ê–í–ö–ê –ü–û –ë–û–¢–£</b>\n\n' +
           'üé¥ <b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n' +
           '/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\n' +
           '/daily - –î–Ω–µ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞\n' +
           '/spreads - –†–∞—Å–∫–ª–∞–¥—ã –¢–∞—Ä–æ\n' +
           '/numerology - –ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è\n' +
           '/lunar - –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å\n' +
           '/premium - –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞\n' +
           '/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞\n\n' +
           'üí° <b>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</b>\n' +
           '‚Ä¢ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é\n' +
           '‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–ª–∞–π–Ω –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É\n' +
           '‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞\n' +
           '‚Ä¢ –ó–∞–ø–∏—à–∏—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n\n' +
           'üîó <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:</b>\n' +
           '‚Ä¢ –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: /webapp\n' +
           '‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞: @mistika_support\n' +
           '‚Ä¢ –ö–∞–Ω–∞–ª –Ω–æ–≤–æ—Å—Ç–µ–π: @mistika_news';
}

module.exports = {
    formatWelcomeMessage,
    formatCardMessage,
    formatDailyCardMessage,
    formatPremiumFeatures,
    formatSubscriptionStatus,
    formatReferralProgram,
    formatReferralStats,
    formatNumerologyReading,
    formatLunarCalendar,
    formatErrorMessage,
    formatHelpMessage,
    getMysticalLoadingMessage,
    getMysticalLoadingSequence
};